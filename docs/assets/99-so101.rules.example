# =============================================================================
# SO-101 udev rules — example template
# =============================================================================
#
# Creates stable symlinks so the ROS launch defaults work out of the box:
#   Arms:    /dev/so101_leader, /dev/so101_follower
#   Cameras: /dev/cam_wrist, /dev/cam_overhead
#
# HOW TO USE
# ----------
# 1. Query device properties (see docs/hardware.md for details):
#
#      # Arms:
#      udevadm info --query=property --name=/dev/ttyACM0 | \
#        egrep 'ID_VENDOR_ID|ID_MODEL_ID|ID_SERIAL_SHORT|ID_PATH'
#
#      # Cameras:
#      udevadm info --query=property --name=/dev/video0 | \
#        egrep 'ID_VENDOR_ID|ID_MODEL_ID|ID_SERIAL_SHORT|ID_PATH'
#
# 2. Replace the XXXX, YYYY, and SERIAL_* placeholders below with your values.
#    If ID_SERIAL_SHORT is missing for your device, match on ID_PATH instead.
#
# 3. Copy to system rules directory:
#      sudo cp docs/assets/99-so101.rules.example /etc/udev/rules.d/99-so101.rules
#
# 4. Reload and trigger:
#      sudo udevadm control --reload-rules
#      sudo udevadm trigger
#
# 5. Verify:
#      ls -l /dev/so101_leader /dev/so101_follower /dev/cam_wrist /dev/cam_overhead
#
# =============================================================================

# ── Arms (tty / USB-serial) ─────────────────────────────────────────────────
# Each Feetech servo adapter shows up as /dev/ttyACM* or /dev/ttyUSB*.
# Use the serial number to distinguish leader from follower.

SUBSYSTEM=="tty", ENV{ID_VENDOR_ID}=="XXXX", ENV{ID_MODEL_ID}=="YYYY", ENV{ID_SERIAL_SHORT}=="SERIAL_LEADER",   SYMLINK+="so101_leader",   GROUP="dialout", MODE="0660"
SUBSYSTEM=="tty", ENV{ID_VENDOR_ID}=="XXXX", ENV{ID_MODEL_ID}=="YYYY", ENV{ID_SERIAL_SHORT}=="SERIAL_FOLLOWER", SYMLINK+="so101_follower", GROUP="dialout", MODE="0660"

# ── Cameras (video4linux) ───────────────────────────────────────────────────
# USB cameras often register two /dev/video* nodes (video + metadata).
# ATTR{index}=="0" selects the main video stream on most cameras.
# If it doesn't work for yours, use /dev/v4l/by-id/*-video-index0 directly.

ACTION=="add|change", SUBSYSTEM=="video4linux", KERNEL=="video*", ENV{ID_SERIAL_SHORT}=="SERIAL_WRIST",    ATTR{index}=="0", SYMLINK+="cam_wrist",    GROUP="video", MODE="0660"
ACTION=="add|change", SUBSYSTEM=="video4linux", KERNEL=="video*", ENV{ID_SERIAL_SHORT}=="SERIAL_OVERHEAD", ATTR{index}=="0", SYMLINK+="cam_overhead", GROUP="video", MODE="0660"

